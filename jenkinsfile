pipeline {
    agent any

   
    

    stages {
	    
	    
        stage('Pull GIT') {
            steps {
                echo 'Pulling...';
                  git branch: 'main',
                  url : 'https://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@github.com/skanderz/Projet_DevOps.git'
            }
        }
        
	    
	    
	    
	       
   stage ('MVN BUILD') {
      steps {
        sh 'mvn clean package'
        echo 'Build stage done'
      }
    }
  
  
  
  
    stage ('MVN COMPILE') {
      steps {
        sh 'mvn compile'
        echo 'compile stage done'
      }
    }
    
    
    
   
    stage ('MVN TEST') {
      steps {
        sh 'mvn test'
      }
    }
    
    
    
     stage ('SonarQube TEST') {
       steps {
              sh 'mvn sonar:sonar -Dsonar.projectKey=ProjectDevops -Dsonar.host.url=http://172.10.0.140:9000 -Dsonar.login=603647c67fb9c37bcb3e07a92c47862f706ccb89'        
       } 
     }
    

	    
	    
  stage('Test JUnit') {
            steps {
                sh "./mvnw test"  
                junit '*/target/surefire-reports/TEST-.xml'
            }  
        }
        
        
           
				    
				  		
		
		
    }   

}
